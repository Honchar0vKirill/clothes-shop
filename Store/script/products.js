// Container with products
const productsList = [
  {
    id: 1,
    img: "Product1",
    name: "Product1",
    cost: "Description1"
  },
  {
    id: 2,
    img: "Product2",
    name: "Product2",
    cost: "Description2"
  },
  {
    id: 3,
    img: "Product3",
    name: "Product3",
    cost: "Description3"
  },
  {
    id: 4,
    img: "Product4",
    name: "Product4",
    cost: "Description4"
  },
  {
    id: 5,
    img: "Product5",
    name: "Product5",
    cost: "Description5"
  },
  {
    id: 6,
    img: "Product6",
    name: "Product6",
    cost: "Description6"
  },
  {
    id: 7,
    img: "Product7",
    name: "Product7",
    cost: "Description7"
  },
  {
    id: 8,
    img: "Product8",
    name: "Product8",
    cost: "Description8"
  },
  {
    id: 9,
    img: "Product9",
    name: "Product9",
    cost: "Description9"
  },
  {
    id: 10,
    img: "Product10",
    name: "Product10",
    cost: "Description10"
  },
  {
    id: 11,
    img: "Product11",
    name: "Product11",
    cost: "Description11"
  },
  {
    id: 12,
    img: "Product12",
    name: "Product12",
    cost: "Description12"
  },
  {
    id: 13,
    img: "Product13",
    name: "Product13",
    cost: "Description13"
  },
  {
    id: 14,
    img: "Product14",
    name: "Product14",
    cost: "Description14"
  },
  {
    id: 15,
    img: "Product15",
    name: "Product15",
    cost: "Description15"
  },
  {
    id: 16,
    img: "Product16",
    name: "Product16",
    cost: "Description16"
  },
  {
    id: 17,
    img: "Product17",
    name: "Product17",
    cost: "Description17"
  },
  {
    id: 18,
    img: "Product18",
    name: "Product18",
    cost: "Description18"
  },
  {
    id: 19,
    img: "Product19",
    name: "Product19",
    cost: "Description19"
  },
  {
    id: 20,
    img: "Product20",
    name: "Product20",
    cost: "Description20"
  },
  {
    id: 21,
    img: "Product21",
    name: "Product21",
    cost: "Description21"
  },
  {
    id: 22,
    img: "Product22",
    name: "Product22",
    cost: "Description22"
  },
  {
    id: 23,
    img: "Product23",
    name: "Product23",
    cost: "Description23"
  },
  {
    id: 24,
    img: "Product24",
    name: "Product24",
    cost: "Description24"
  },
  {
    id: 25,
    img: "Product25",
    name: "Product25",
    cost: "Description25"
  },
  {
    id: 26,
    img: "Product26",
    name: "Product26",
    cost: "Description26"
  },
  {
    id: 27,
    img: "Product27",
    name: "Product27",
    cost: "Description27"
  },
  {
    id: 28,
    img: "Product28",
    name: "Product28",
    cost: "Description28"
  },
  {
    id: 29,
    img: "Product29",
    name: "Product29",
    cost: "Description29"
  },
  {
    id: 30,
    img: "Product30",
    name: "Product30",
    cost: "Description30"
  },
  {
    id: 1,
    img: "Product1",
    name: "Product1",
    cost: "Description1"
  },
  {
    id: 2,
    img: "Product2",
    name: "Product2",
    cost: "Description2"
  },
  {
    id: 3,
    img: "Product3",
    name: "Product3",
    cost: "Description3"
  },
  {
    id: 4,
    img: "Product4",
    name: "Product4",
    cost: "Description4"
  },
  {
    id: 5,
    img: "Product5",
    name: "Product5",
    cost: "Description5"
  },
  {
    id: 6,
    img: "Product6",
    name: "Product6",
    cost: "Description6"
  },
  {
    id: 7,
    img: "Product7",
    name: "Product7",
    cost: "Description7"
  },
  {
    id: 8,
    img: "Product8",
    name: "Product8",
    cost: "Description8"
  },
  {
    id: 9,
    img: "Product9",
    name: "Product9",
    cost: "Description9"
  },
  {
    id: 10,
    img: "Product10",
    name: "Product10",
    cost: "Description10"
  },
  {
    id: 11,
    img: "Product11",
    name: "Product11",
    cost: "Description11"
  },
  {
    id: 12,
    img: "Product12",
    name: "Product12",
    cost: "Description12"
  },
  {
    id: 13,
    img: "Product13",
    name: "Product13",
    cost: "Description13"
  },
  {
    id: 14,
    img: "Product14",
    name: "Product14",
    cost: "Description14"
  },
  {
    id: 15,
    img: "Product15",
    name: "Product15",
    cost: "Description15"
  },
  {
    id: 16,
    img: "Product16",
    name: "Product16",
    cost: "Description16"
  },
  {
    id: 17,
    img: "Product17",
    name: "Product17",
    cost: "Description17"
  },
  {
    id: 18,
    img: "Product18",
    name: "Product18",
    cost: "Description18"
  },
  {
    id: 19,
    img: "Product19",
    name: "Product19",
    cost: "Description19"
  },
  {
    id: 20,
    img: "Product20",
    name: "Product20",
    cost: "Description20"
  },
  {
    id: 21,
    img: "Product21",
    name: "Product21",
    cost: "Description21"
  },
  {
    id: 22,
    img: "Product22",
    name: "Product22",
    cost: "Description22"
  },
  {
    id: 23,
    img: "Product23",
    name: "Product23",
    cost: "Description23"
  },
  {
    id: 24,
    img: "Product24",
    name: "Product24",
    cost: "Description24"
  },
  {
    id: 25,
    img: "Product25",
    name: "Product25",
    cost: "Description25"
  },
  {
    id: 26,
    img: "Product26",
    name: "Product26",
    cost: "Description26"
  },
  {
    id: 27,
    img: "Product27",
    name: "Product27",
    cost: "Description27"
  },
  {
    id: 28,
    img: "Product28",
    name: "Product28",
    cost: "Description28"
  },
  {
    id: 29,
    img: "Product29",
    name: "Product29",
    cost: "Description29"
  },
  {
    id: 60,
    img: "Product60",
    name: "Product60",
    cost: "Description60"
  }
]

// Some lets which we need to crete pagination
let thisPage = 1
const limit = 10
const list = document.querySelector('.main_content')

const loadItem = () => {
  const firstElement = limit * (thisPage - 1)
  const lastElement = limit * thisPage - 1

  list.innerHTML = ''

  for (let i = firstElement; i <= lastElement && i < productsList.length; i++) {
    const product = productsList[i]
    
    const contentBlock = document.createElement('div')
    contentBlock.classList.add('content-block')
    contentBlock.innerHTML = `
    <img class="content-block_img" src="${product.img}" alt="">
    <p class="content-block_text">${product.name}</p>
    <p class="content-block_text sum">${product.cost}</p>
    <button type="button"  class="content-block_button">Add to the cart</button>
    `
    list.appendChild(contentBlock)
  }
  listPage()
}

const listPage = () => {
  const count = 5

  const paginationNumbers = document.querySelector('.pagination-numbers')
  paginationNumbers.innerHTML = ''

  // Calculate the starting page number based on the current page
  let startPage = thisPage - count
  if (startPage < 1) {
    startPage = 1
  }

  // Calculate the ending page number based on the starting page
  let endPage = startPage + count - 1
  if (endPage > 10) {
    endPage = 10
  }

  // Add the left arrow element
  const leftArrow = document.createElement('li')
  leftArrow.classList.add('pagination_element')
  leftArrow.id = 'pagination_element_left'
  leftArrow.innerHTML = '<img src="./img/Pagination-left-arrow.svg" alt="">'
  leftArrow.addEventListener('click', () => changePage(thisPage - 1))
  paginationNumbers.appendChild(leftArrow)

  for (let i = startPage; i <= endPage; i++) {
    let newPage = document.createElement('li')
    newPage.classList.add('pagination_element')
    newPage.innerText = i

    if (i == thisPage) {
      newPage.classList.add('activePaginationEl')
    }

    newPage.addEventListener('click', () => changePage(i))

    paginationNumbers.appendChild(newPage)
  }

  // Add the right arrow element
  const rightArrow = document.createElement('li')
  rightArrow.classList.add('pagination_element')
  rightArrow.id = 'pagination_element_right'
  rightArrow.innerHTML = '<img src="./img/Pagination-right-arrow.svg" alt="">'
  rightArrow.addEventListener('click', () => changePage(thisPage + 1))
  paginationNumbers.appendChild(rightArrow)
}

const changePage = (i = 1) => {
  thisPage = i

  // Update the page number
  const pageElement = document.querySelector('.pagination_element.activePaginationEl')
  if (pageElement) {
    pageElement.classList.remove('activePaginationEl')
  }
  const newPageElement = document.querySelector(`.pagination_element:nth-child(${thisPage + 1})`)
  if (newPageElement) {
    newPageElement.classList.add('activePaginationEl')
  }

  loadItem()
}

changePage()